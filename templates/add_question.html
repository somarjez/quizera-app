{% extends "base.html" %} {% block title %}Add Questions - {{ quiz.title }} -
Quizera{% endblock %} {% block extra_head %}
<script src="https://cdn.tailwindcss.com"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/createquiz.css') }}"
/>
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='css/style.css') }}"
/>
<style>
  /* Match Create/Edit Quiz page background and card styles */
  html,
  body {
    height: 100%;
    margin: 0;
  }

  /* Background gradient + visible waves (same as edit_question/create_quiz) */
  body {
    background: linear-gradient(180deg, #eef2ff 0%, #e0e7ff 40%, #f8fafc 100%);
    background-attachment: fixed;
    position: relative;
    overflow-x: hidden;
    min-height: 100vh;
  }

  .bg-curves {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 63vh;
    z-index: -5;
    pointer-events: none;
    overflow: visible;
    opacity: 1.65;
  }
  .bg-curves svg {
    display: block;
    width: 100%;
    height: 100%;
    filter: saturate(1.4) brightness(1.08)
      drop-shadow(0 6px 18px rgba(37, 70, 219, 0.08));
  }

  :root {
    --accent-a: #2546db;
    --accent-b: #ff9f43;
  }

  /* Quiz card style (same as edit_question/create_quiz) */
  .quiz-card {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: none;
    border-radius: 1.25rem;
    border: none;
    border-top: 8px solid #08196d !important;
    overflow: hidden;
    box-shadow: 0 10px 34px rgba(37, 70, 219, 0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.25s ease,
      border-color 0.4s ease;
  }
  .quiz-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
  }

  /* Inputs get the same focus style */
  .form-input {
    background-color: #f9fafb;
    border: 1px solid #0e1c64;
    transition: all 0.25s ease;
  }
  .form-input:focus {
    border-color: var(--accent-a);
    box-shadow: 0 0 0 3px rgba(37, 70, 219, 0.12);
    background-color: #fff;
  }
</style>
{% endblock %} {% block main_class %}{% endblock %} {% block content %}
<!-- Decorative background curves -->
<div class="bg-curves" aria-hidden="true">
  <svg
    viewBox="0 0 1440 320"
    preserveAspectRatio="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill="#2b3b8c"
      opacity="0.45"
      d="M0,192L48,170.7C96,149,192,107,288,101.3C384,96,480,128,576,128C672,128,768,96,864,74.7C960,53,1056,43,1152,74.7C1248,107,1344,181,1392,218.7L1440,256L1440,0L0,0Z"
    ></path>
    <path
      fill="#f5a45b"
      opacity="0.45"
      d="M0,160L48,154.7C96,149,192,139,288,144C384,149,480,171,576,176C672,181,768,171,864,160C960,149,1056,139,1152,154.7C1248,171,1344,213,1392,234.7L1440,256L1440,0L0,0Z"
    ></path>
    <path
      fill="#2b3b8c"
      opacity="0.6"
      d="M0,96L48,106.7C96,117,192,139,288,154.7C384,171,480,181,576,181.3C672,181,768,171,864,149.3C960,128,1056,96,1152,90.7C1248,85,1344,107,1392,117.3L1440,128L1440,0L0,0Z"
    ></path>
    <path
      fill="#ffd166"
      opacity="0.28"
      d="M0,160L48,154.7C96,149,192,139,288,144C384,149,480,171,576,176C672,181,768,171,864,160C960,149,1056,139,1152,154.7C1248,171,1344,213,1392,234.7L1440,256L1440,0L0,0Z"
    ></path>
  </svg>
</div>

<div class="container mx-auto px-4 py-6">
  <div
    class="max-w-4xl mx-auto flex flex-col"
    style="height: calc(100vh - 120px)"
  >
    <!-- Header/Breadcrumb -->
    <div
      class="flex items-center space-x-2 text-[0.975rem] text-gray-600 mb-4 pb-2 border-b border-black/30"
    >
      <a
        href="{{ url_for('dashboard') }}"
        class="hover:text-blue-600 text-black"
        >Dashboard</a
      >
      <i class="fas fa-chevron-right text-xs text-black"></i>
      <a
        href="{{ url_for('manage_quiz', quiz_id=quiz_id) }}"
        class="hover:text-blue-600 text-black"
        >{{ quiz.title }}</a
      >
      <i class="fas fa-chevron-right text-xs text-black"></i>
      <span class="font-bold text-black">Add Questions</span>
    </div>
    <h1 class="text-2xl md:text-3xl font-bold text-black">Add Questions</h1>
    <p class="text-sm md:text-base mb-4 text-black">Quiz: {{ quiz.title }}</p>

    <!-- Add Questions Card -->
    <div class="quiz-card overflow-hidden flex-1 flex flex-col">
      <div class="p-4 border-b border-gray-200">
        <div class="flex space-x-4">
          <button
            id="singleMethodBtn"
            class="method-btn active px-4 py-2 text-sm font-semibold rounded-md bg-blue-100 text-blue-800 border border-blue-200"
          >
            <i class="fas fa-plus mr-2"></i>Single Question
          </button>
          <button
            id="bulkMethodBtn"
            class="method-btn px-4 py-2 text-sm font-semibold rounded-md text-gray-700 hover:bg-gray-100 border border-gray-200"
          >
            <i class="fas fa-list mr-2"></i>Multiple Questions
          </button>
          <button
            id="csvMethodBtn"
            class="method-btn px-4 py-2 text-sm font-semibold rounded-md text-gray-700 hover:bg-gray-100 border border-gray-200"
          >
            <i class="fas fa-upload mr-2"></i>CSV Upload
          </button>
        </div>
      </div>

      <div class="overflow-auto flex-1">
        <!-- Single Question Method -->
        <div id="singleMethod" class="method-content">
          <form method="POST" id="singleQuestionForm">
            <!-- Question Text Section -->
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
              <div class="flex items-start space-x-4">
                <div
                  class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center flex-shrink-0 mt-2"
                >
                  <i
                    class="fas fa-question text-blue-800 dark:text-blue-400 text-lg"
                  ></i>
                </div>
                <div class="flex-1">
                  <textarea
                    name="question_text"
                    placeholder="Question"
                    class="w-full text-lg border-0 border-b-2 border-gray-200 dark:border-gray-600 focus:border-blue-700 dark:focus:border-blue-600 focus:ring-0 outline-none p-2 bg-transparent placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100"
                    rows="2"
                    required
                  ></textarea>
                  <div class="mt-4">
                    <select
                      name="question_type"
                      id="questionType"
                      class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-700 dark:focus:ring-blue-600 focus:border-transparent text-gray-900 dark:text-gray-100"
                      required
                    >
                      <option value="">Question Type</option>
                      <option value="multiple_choice">Multiple choice</option>
                      <option value="true_false">True/False</option>
                      <option value="identification">Short answer</option>
                      <option value="enumeration">Paragraph</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Answer Options Section -->
            <div class="p-6">
              <!-- Multiple Choice Options -->
              <div id="multipleChoiceOptions" class="hidden">
                <div class="space-y-4">
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="correct_answer"
                      value="A"
                      id="correctA"
                      class="w-4 h-4 text-blue-800 dark:text-blue-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <div class="flex items-center space-x-3 flex-1">
                      <span
                        class="w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center text-sm font-medium text-gray-900 dark:text-gray-100"
                        >A</span
                      >
                      <input
                        type="text"
                        name="option_a"
                        placeholder="Option 1"
                        class="flex-1 border-0 border-b border-gray-200 dark:border-gray-600 focus:border-blue-700 dark:focus:border-blue-600 focus:ring-0 outline-none py-2 bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                      />
                    </div>
                  </div>
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="correct_answer"
                      value="B"
                      id="correctB"
                      class="w-4 h-4 text-blue-800 dark:text-blue-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <div class="flex items-center space-x-3 flex-1">
                      <span
                        class="w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center text-sm font-medium text-gray-900 dark:text-gray-100"
                        >B</span
                      >
                      <input
                        type="text"
                        name="option_b"
                        placeholder="Option 2"
                        class="flex-1 border-0 border-b border-gray-200 dark:border-gray-600 focus:border-blue-700 dark:focus:border-blue-600 focus:ring-0 outline-none py-2 bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                      />
                    </div>
                  </div>
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="correct_answer"
                      value="C"
                      id="correctC"
                      class="w-4 h-4 text-blue-800 dark:text-blue-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <div class="flex items-center space-x-3 flex-1">
                      <span
                        class="w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center text-sm font-medium text-gray-900 dark:text-gray-100"
                        >C</span
                      >
                      <input
                        type="text"
                        name="option_c"
                        placeholder="Option 3"
                        class="flex-1 border-0 border-b border-gray-200 dark:border-gray-600 focus:border-blue-700 dark:focus:border-blue-600 focus:ring-0 outline-none py-2 bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                      />
                    </div>
                  </div>
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="correct_answer"
                      value="D"
                      id="correctD"
                      class="w-4 h-4 text-blue-800 dark:text-blue-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <div class="flex items-center space-x-3 flex-1">
                      <span
                        class="w-6 h-6 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center text-sm font-medium text-gray-900 dark:text-gray-100"
                        >D</span
                      >
                      <input
                        type="text"
                        name="option_d"
                        placeholder="Option 4"
                        class="flex-1 border-0 border-b border-gray-200 dark:border-gray-600 focus:border-blue-700 dark:focus:border-blue-600 focus:ring-0 outline-none py-2 bg-transparent text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                      />
                    </div>
                  </div>
                </div>
                <div class="mt-4 p-3 bg-blue-50 rounded-md">
                  <p class="text-sm text-black">
                    <i class="fas fa-info-circle mr-2 text-black"></i>
                    Select the radio button next to the correct answer
                  </p>
                </div>
              </div>

              <!-- True/False Options -->
              <div id="trueFalseOptions" class="hidden">
                <div class="space-y-3">
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="tf_answer"
                      value="true"
                      id="tfTrue"
                      class="w-4 h-4 text-purple-600 dark:text-purple-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <label for="tfTrue" class="text-gray-700 dark:text-gray-300"
                      >True</label
                    >
                  </div>
                  <div class="flex items-center space-x-3">
                    <input
                      type="radio"
                      name="tf_answer"
                      value="false"
                      id="tfFalse"
                      class="w-4 h-4 text-purple-600 dark:text-purple-400 border-gray-300 dark:border-gray-600 dark:bg-gray-700"
                    />
                    <label
                      for="tfFalse"
                      class="text-gray-700 dark:text-gray-300"
                      >False</label
                    >
                  </div>
                </div>
              </div>

              <!-- Short Answer/Paragraph Options -->
              <div id="openEndedOptions" class="hidden">
                <div class="space-y-4">
                  <div
                    class="border border-gray-200 dark:border-gray-600 rounded-md p-4 bg-gray-50 dark:bg-gray-700"
                  >
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                      Correct answer(s)
                    </p>
                    <textarea
                      name="correct_answers"
                      rows="3"
                      class="w-full border-0 bg-transparent outline-none text-gray-700 dark:text-gray-300 placeholder-gray-400 dark:placeholder-gray-500"
                      placeholder="Enter acceptable answers separated by commas"
                    ></textarea>
                  </div>
                  <p class="text-xs text-gray-500 dark:text-gray-400">
                    For multiple acceptable answers, separate them with commas
                    (e.g., JavaScript, JS, javascript)
                  </p>
                </div>
              </div>
            </div>

            <!-- Footer Section -->
            <div
              class="sticky bottom-0 z-10 p-6 bg-gray-50 border-t border-gray-200 flex-shrink-0 shadow-sm rounded-b-lg"
            >
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                  <label class="text-sm text-gray-600">Points:</label>
                  <input
                    type="number"
                    name="points"
                    value="1"
                    min="1"
                    max="10"
                    class="form-input w-20 px-2 py-1 rounded text-sm"
                  />
                </div>

                <div class="flex items-center space-x-3">
                  <a
                    href="{{ url_for('manage_quiz', quiz_id=quiz_id) }}"
                    class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-gray-800 transition-colors"
                  >
                    Cancel
                  </a>
                  <button
                    type="submit"
                    class="bg-blue-800 text-white px-6 py-2 text-sm rounded-md hover:bg-blue-900 transition-colors shadow-sm font-semibold inline-flex items-center gap-2 align-middle"
                  >
                    Add Question
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Bulk Questions Method -->
        <div id="bulkMethod" class="method-content hidden">
          <div class="p-6">
            <div class="mb-4">
              <h3
                class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"
              >
                Add Multiple Questions
              </h3>
              <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                Add multiple questions at once. You can manually set answers
                after adding.
              </p>
            </div>

            <div id="bulkQuestions">
              <div
                class="bulk-question mb-6 p-4 border border-gray-200 dark:border-gray-600 rounded-lg"
              >
                <div class="flex items-start space-x-4 mb-4">
                  <span
                    class="question-number bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium"
                    >1</span
                  >
                  <div class="flex-1">
                    <select
                      name="bulk_question_type[]"
                      class="bulk-type-select bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md px-3 py-2 text-sm mb-3 text-gray-900 dark:text-gray-100"
                      required
                    >
                      <option value="">Question Type</option>
                      <option value="multiple_choice">Multiple choice</option>
                      <option value="true_false">True/False</option>
                      <option value="identification">Short answer</option>
                      <option value="enumeration">Paragraph</option>
                    </select>
                    <textarea
                      name="bulk_question_text[]"
                      placeholder="Question text"
                      class="w-full border border-gray-200 dark:border-gray-600 rounded-md p-3 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                      rows="2"
                      required
                    ></textarea>

                    <!-- Multiple Choice Options -->
                    <div class="bulk-mc-options hidden mt-3">
                      <label
                        class="text-sm text-gray-600 dark:text-gray-400 mb-2 block"
                        >Multiple Choice Options:</label
                      >
                      <div class="space-y-2 mb-3">
                        <input
                          type="text"
                          name="bulk_option_a[]"
                          placeholder="Option A"
                          class="w-full border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                        />
                        <input
                          type="text"
                          name="bulk_option_b[]"
                          placeholder="Option B"
                          class="w-full border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                        />
                        <input
                          type="text"
                          name="bulk_option_c[]"
                          placeholder="Option C"
                          class="w-full border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                        />
                        <input
                          type="text"
                          name="bulk_option_d[]"
                          placeholder="Option D"
                          class="w-full border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                        />
                      </div>
                      <select
                        name="bulk_correct_answer[]"
                        class="border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"
                      >
                        <option value="A">Correct Answer: A</option>
                        <option value="B">Correct Answer: B</option>
                        <option value="C">Correct Answer: C</option>
                        <option value="D">Correct Answer: D</option>
                      </select>
                    </div>

                    <!-- True/False Options -->
                    <div class="bulk-tf-options hidden mt-3">
                      <label
                        class="text-sm text-gray-600 dark:text-gray-400 mb-2 block"
                        >Correct Answer:</label
                      >
                      <select
                        name="bulk_tf_answer[]"
                        class="border border-gray-200 dark:border-gray-600 rounded px-3 py-2 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"
                      >
                        <option value="true">True</option>
                        <option value="false">False</option>
                      </select>
                    </div>

                    <!-- Open Ended Options -->
                    <div class="bulk-open-options hidden mt-3">
                      <label
                        class="text-sm text-gray-600 dark:text-gray-400 mb-2 block"
                        >Correct Answers (separated by commas):</label
                      >
                      <textarea
                        name="bulk_answers[]"
                        placeholder="Enter acceptable answers separated by commas"
                        class="w-full border border-gray-200 dark:border-gray-600 rounded-md p-3 text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"
                        rows="2"
                      ></textarea>
                    </div>

                    <div class="mt-3 flex items-center space-x-4">
                      <div class="flex items-center space-x-2">
                        <label class="text-sm text-gray-600">Points:</label>
                        <input
                          type="number"
                          name="bulk_points[]"
                          value="1"
                          min="1"
                          max="10"
                          class="form-input w-20 px-2 py-1 rounded text-sm"
                        />
                      </div>
                      <button
                        type="button"
                        class="remove-question text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm"
                        style="display: none"
                      >
                        <i class="fas fa-trash mr-1"></i>Remove
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              class="flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50"
            >
              <button
                type="button"
                id="addBulkQuestion"
                class="text-blue-800 hover:text-blue-700 text-sm font-medium"
              >
                <i class="fas fa-plus mr-2"></i>Add Another Question
              </button>
              <div class="flex items-center space-x-3">
                <a
                  href="{{ url_for('manage_quiz', quiz_id=quiz_id) }}"
                  class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-gray-800 transition-colors"
                >
                  Cancel
                </a>
                <button
                  type="button"
                  id="saveBulkQuestions"
                  class="bg-blue-800 text-white px-6 py-2 text-sm rounded-md hover:bg-blue-900 transition-colors shadow-sm font-semibold"
                >
                  Add All Questions
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- CSV Upload Method -->
        <div id="csvMethod" class="method-content hidden">
          <div class="p-6">
            <h3
              class="text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"
            >
              Upload Questions from CSV
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              Upload a CSV file with your questions. The system will validate
              and parse them automatically.
            </p>

            <!-- File Upload Area -->
            <div class="mb-6">
              <div
                class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center hover:border-purple-400 dark:hover:border-purple-500 transition-colors cursor-pointer"
                id="csvDropZone"
              >
                <input type="file" id="csvFile" accept=".csv" class="hidden" />
                <i
                  class="fas fa-cloud-upload-alt text-4xl text-gray-400 dark:text-gray-500 mb-4"
                ></i>
                <p
                  class="text-lg font-medium text-gray-700 dark:text-gray-300 mb-2"
                >
                  Drop your CSV file here
                </p>
                <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">
                  or
                  <span
                    class="text-blue-800 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium cursor-pointer"
                    id="browseBtn"
                    >click to browse</span
                  >
                </p>
                <p class="text-xs text-gray-400 dark:text-gray-500">
                  Supported format: .csv files only (max 10MB)
                </p>
              </div>

              <!-- Upload Progress -->
              <div id="uploadProgress" class="hidden mt-4">
                <div class="bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                  <div
                    id="progressBar"
                    class="bg-blue-800 dark:bg-blue-700 h-2 rounded-full transition-all duration-300"
                    style="width: 0%"
                  ></div>
                </div>
                <p
                  id="progressText"
                  class="text-sm text-gray-600 dark:text-gray-400 mt-2"
                >
                  Uploading...
                </p>
              </div>
            </div>

            <!-- Error Messages -->
            <div id="errorMessages" class="hidden mb-6">
              <div
                class="bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-md p-4"
              >
                <div class="flex items-start">
                  <i
                    class="fas fa-exclamation-triangle text-red-500 dark:text-red-400 mt-1 mr-3"
                  ></i>
                  <div>
                    <h4 class="text-red-800 dark:text-red-300 font-medium mb-2">
                      Upload Errors
                    </h4>
                    <ul
                      id="errorList"
                      class="text-sm text-red-700 dark:text-red-300 list-disc list-inside space-y-1"
                    ></ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- CSV Format Guide -->
            <div class="mb-6">
              <h4 class="font-medium text-gray-900 dark:text-gray-100 mb-3">
                Required CSV Format:
              </h4>
              <div
                class="bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md p-4"
              >
                <div class="mb-4">
                  <h5
                    class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
                  >
                    Column Headers (Required):
                  </h5>
                  <code
                    class="text-sm bg-white dark:bg-gray-800 px-2 py-1 rounded border dark:border-gray-600 text-gray-900 dark:text-gray-100"
                    >question_type,question_text,choices,answers,points</code
                  >
                </div>

                <table class="w-full text-left text-sm">
                  <thead>
                    <tr class="border-b border-gray-300 dark:border-gray-600">
                      <th
                        class="py-2 px-3 font-medium text-gray-700 dark:text-gray-300"
                      >
                        Question Type
                      </th>
                      <th
                        class="py-2 px-3 font-medium text-gray-700 dark:text-gray-300"
                      >
                        Question Text
                      </th>
                      <th
                        class="py-2 px-3 font-medium text-gray-700 dark:text-gray-300"
                      >
                        Choices
                      </th>
                      <th
                        class="py-2 px-3 font-medium text-gray-700 dark:text-gray-300"
                      >
                        Answers
                      </th>
                      <th
                        class="py-2 px-3 font-medium text-gray-700 dark:text-gray-300"
                      >
                        Points
                      </th>
                    </tr>
                  </thead>
                  <tbody class="text-gray-600 dark:text-gray-400">
                    <tr class="border-b border-gray-200 dark:border-gray-600">
                      <td class="py-2 px-3">multiple_choice</td>
                      <td class="py-2 px-3">"What is 2+2?"</td>
                      <td class="py-2 px-3">"2|3|4|5"</td>
                      <td class="py-2 px-3">"C"</td>
                      <td class="py-2 px-3">1</td>
                    </tr>
                    <tr class="border-b border-gray-200 dark:border-gray-600">
                      <td class="py-2 px-3">true_false</td>
                      <td class="py-2 px-3">"The sky is blue"</td>
                      <td class="py-2 px-3">""</td>
                      <td class="py-2 px-3">"true"</td>
                      <td class="py-2 px-3">1</td>
                    </tr>
                    <tr class="border-b border-gray-200 dark:border-gray-600">
                      <td class="py-2 px-3">identification</td>
                      <td class="py-2 px-3">"Capital of France?"</td>
                      <td class="py-2 px-3">""</td>
                      <td class="py-2 px-3">"Paris|paris"</td>
                      <td class="py-2 px-3">2</td>
                    </tr>
                    <tr>
                      <td class="py-2 px-3">enumeration</td>
                      <td class="py-2 px-3">"Explain photosynthesis"</td>
                      <td class="py-2 px-3">""</td>
                      <td class="py-2 px-3">
                        "Process by which plants convert light energy"
                      </td>
                      <td class="py-2 px-3">3</td>
                    </tr>
                  </tbody>
                </table>

                <div class="mt-4 p-3 bg-blue-50 rounded-md">
                  <h5 class="text-sm font-medium text-black mb-2">
                    Important Notes:
                  </h5>
                  <ul class="text-xs text-black space-y-1">
                    <li>• Use quotes around text containing commas</li>
                    <li>
                      • For multiple choice: separate choices with | (pipe),
                      answer should be A, B, C, or D
                    </li>
                    <li>
                      • For true/false: leave choices empty, answer should be
                      "true" or "false"
                    </li>
                    <li>
                      • For identification/enumeration: leave choices empty,
                      separate multiple answers with |
                    </li>
                    <li>
                      • Valid question types: multiple_choice, true_false,
                      identification, enumeration
                    </li>
                    <li>• Points must be a number between 1-10</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Sample CSV Download -->
            <div class="mb-6">
              <button
                id="downloadSample"
                class="text-blue-800 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium"
              >
                <i class="fas fa-download mr-2"></i>Download Sample CSV Template
              </button>
            </div>

            <!-- Preview Section -->
            <div id="csvPreview" class="hidden mb-6">
              <div class="flex items-center justify-between mb-3">
                <h4 class="font-medium text-gray-900 dark:text-gray-100">
                  Preview Questions
                </h4>
                <span
                  id="validQuestionCount"
                  class="text-sm text-green-600 dark:text-green-400 font-medium"
                ></span>
              </div>
              <div
                id="csvPreviewContent"
                class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-md max-h-96 overflow-y-auto"
              >
                <!-- Preview content will be inserted here -->
              </div>
            </div>

            <!-- Action Buttons -->
            <div
              class="flex items-center justify-between p-4 border-t border-gray-200 bg-gray-50"
            >
              <div class="text-sm text-gray-600">
                <span id="csvQuestionCount">0</span> questions ready to import
              </div>
              <div class="flex items-center space-x-3">
                <button
                  type="button"
                  id="clearCsv"
                  class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 transition-colors"
                  disabled
                >
                  Clear
                </button>
                <button
                  type="button"
                  id="importCsvQuestions"
                  class="bg-blue-800 text-white px-6 py-2 text-sm rounded-md hover:bg-blue-900 transition-colors shadow-sm disabled:bg-gray-400 disabled:cursor-not-allowed font-semibold"
                  disabled
                >
                  Import Questions
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block extra_scripts %}
<script src="{{ url_for('static', filename='js/addquestion.js') }}"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
